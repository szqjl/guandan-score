@startuml 过A制流程图
!theme plain
skinparam backgroundColor #FFFFFF
skinparam activity {
  BackgroundColor #E8F4FD
  BorderColor #1565C0
  FontColor #333333
}

title 掼蛋过A制游戏流程图

start

:游戏开始;
:初始化比分 (红方:2, 蓝方:2);

repeat
  :等待玩家点击升级按钮;
  
  if (点击的是双上按钮?) then (是)
    :比分 +3;
  elseif (点击的是1游3游按钮?) then (是)
    :比分 +2;
  elseif (点击的是1游末游按钮?) then (是)
    :比分 +1;
  endif
  
  :更新比分显示;
  
  if (任何一方达到A级?) then (是)
    :进入A阶段;
    
    repeat
      :等待A阶段操作;
      
      if (本方点击双上?) then (是)
        if (头游+二游?) then (是)
          :恭喜某方首轮过A成功;
          :游戏结束;
          stop
        else (否)
          :升级到A1;
          :提示"某方第一轮A未过，加油鸭！";
        endif
      elseif (本方点击1游3游?) then (是)
        if (头游+三游?) then (是)
          :恭喜某方首轮过A成功;
          :游戏结束;
          stop
        else (否)
          :升级到A1;
          :提示"某方第一轮A未过，加油鸭！";
        endif
      elseif (本方点击1游末游?) then (是)
        :头游+末游 = 失败;
        :升级到A1;
        :提示"某方第一轮A未过，加油鸭！";
      elseif (对方点击任何按钮?) then (是)
        :对方正常升级;
        :本方升级到A1;
        :提示"某方遗憾错失第一轮过A挑战";
      endif
      
      if (本方处于A1阶段?) then (是)
        repeat
          :等待A1阶段操作;
          
          if (本方点击双上?) then (是)
            if (头游+二游?) then (是)
              :恭喜某方第二轮过A成功;
              :游戏结束;
              stop
            else (否)
              :升级到A2;
              :提示"某方第二轮A未过，加油鸭！";
            endif
          elseif (本方点击1游3游?) then (是)
            if (头游+三游?) then (是)
              :恭喜某方第二轮过A成功;
              :游戏结束;
              stop
            else (否)
              :升级到A2;
              :提示"某方第二轮A未过，加油鸭！";
            endif
          elseif (本方点击1游末游?) then (是)
            :头游+末游 = 失败;
            :升级到A2;
            :提示"某方第二轮A未过，加油鸭！";
          elseif (对方点击任何按钮?) then (是)
            :对方正常升级;
            :本方升级到A2;
            :提示"某方遗憾错失第二轮过A挑战";
          endif
          
          if (本方处于A2阶段?) then (是)
            repeat
              :等待A2阶段操作;
              
              if (本方点击双上?) then (是)
                if (头游+二游?) then (是)
                  :恭喜某方第三轮过A成功;
                  :游戏结束;
                  stop
                else (否)
                  :升级到A3;
                  :提示"某方第三轮A未过，加油鸭！";
                endif
              elseif (本方点击1游3游?) then (是)
                if (头游+三游?) then (是)
                  :恭喜某方第三轮过A成功;
                  :游戏结束;
                  stop
                else (否)
                  :升级到A3;
                  :提示"某方第三轮A未过，加油鸭！";
                endif
              elseif (本方点击1游末游?) then (是)
                :头游+末游 = 失败;
                :三次过A未成功;
                :比分显示A3 (黑色);
                :提示"非常遗憾，某方3次过A未成功，游戏结束";
                :游戏结束;
                stop
              elseif (对方点击任何按钮?) then (是)
                :对方正常升级;
                :提示"非常遗憾，某方虽经多次闯关，但3次过A未成功，虽败犹荣";
                :游戏结束;
                stop
              endif
            repeat while (A2阶段未结束?) is (是)
          endif
        repeat while (A1阶段未结束?) is (是)
      endif
      
    repeat while (A阶段未结束?) is (是)
  else (否)
    :继续正常游戏;
  endif
  
repeat while (游戏未结束?) is (是)

stop

@enduml
