# guandan-score 版本管理系统

═══════════════════════════════════════════════════════════════════════════════

## 📋 版本管理概述

本系统提供完整的版本管理功能，支持版本创建、回滚、调用和状态跟踪。

## 🏷️ 版本命名规范

### 版本号格式
```
主版本号.次版本号.修订号-状态标识
```

### 版本类型说明
- **主版本号**: 重大功能变更或架构调整
- **次版本号**: 新功能添加或重要优化
- **修订号**: Bug修复或小功能改进
- **状态标识**: 
  - `stable` - 稳定版本
  - `beta` - 测试版本
  - `dev` - 开发版本

### 示例
```
v1.0.0-stable    # 稳定版本
v1.1.0-beta      # 测试版本
v1.1.1-dev       # 开发版本
```

═══════════════════════════════════════════════════════════════════════════════

## 📊 版本状态表

| 版本号 | 状态 | 创建日期 | 主要功能 | 负责人 | 备注 |
|--------|------|----------|----------|--------|------|
| v2.0.3-stable | 🟢 当前版本 | 2024-12-19 | 游戏功能修复和UI优化版 | Jennifer | 全面功能修复和界面优化 |
| v2.0.2-stable | 🟢 稳定版本 | 2024-12-19 | 把数制规则完善版 | Jennifer | 把数制"追不上"机制完善 |
| v2.0.1-stable | 🟢 稳定版本 | 2024-12-19 | 把数选择功能优化版 | Jennifer | 把数选择功能优化 |
| v1.2.1-stable | 🟢 稳定版本 | 2024-12-19 | UI布局优化版 | Jennifer | UI布局优化和功能修复 |
| v1.2.0-stable | 🟢 稳定版本 | 2024-12-19 | 过A制规则完善版 | Jennifer | 过A制规则全面实现 |
| v1.1.0-stable | 🟢 稳定版本 | 2024-12-19 | 按钮反馈功能优化版 | Jennifer | 按钮反馈和队伍命名优化 |
| v1.0.0-stable | 🟢 稳定版本 | 2024-09-21 | 基础核心功能版 | Jennifer | 队伍设置页面完成 |

═══════════════════════════════════════════════════════════════════════════════

## 🔄 版本操作命令

### 创建新版本
```bash
# 创建新版本（含完整项目文件备份）
node project-plan/version-manager.js create <版本号> [描述]

# 完善现有版本备份
node project-plan/version-manager.js complete <版本号>

# 完善所有版本备份
node project-plan/version-manager.js complete-all

# 列出所有版本
node project-plan/version-manager.js list

# 显示当前版本
node project-plan/version-manager.js current
```

### 版本回滚
```bash
# 回滚到指定版本
npm run version:rollback v1.0.0-stable

# 回滚到上一个版本
npm run version:rollback:previous

# 回滚到最新稳定版
npm run version:rollback:stable
```

### 版本调用
```bash
# 切换到指定版本
npm run version:switch v1.0.0-stable

# 查看当前版本
npm run version:current

# 列出所有版本
npm run version:list
```

### 版本比较
```bash
# 比较两个版本
npm run version:compare v1.0.0-stable v1.1.0-beta

# 查看版本差异
npm run version:diff v1.0.0-stable
```

═══════════════════════════════════════════════════════════════════════════════

## 📁 版本文件结构

```
versions/
├── v2.0.3-stable/                # 🟢 当前版本 - 游戏功能修复和UI优化版
│   ├── app.js                     # 应用入口
│   ├── app.json                   # 应用配置
│   ├── package.json               # 依赖配置
│   ├── pages/                     # 页面文件
│   ├── images/                    # 图片资源
│   ├── utils/                     # 工具文件
│   ├── data/                      # 数据文件
│   ├── 把数制规则.md              # 规则文档
│   ├── 过A制规则.md              # 规则文档
│   ├── 页面标题图片要求.md        # 文档
│   └── version-info.json          # 版本信息文件
├── v2.0.2-stable/                # 🟢 稳定版本 - 把数制规则完善版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
├── v2.0.1-stable/                # 🟢 稳定版本 - 把数选择功能优化版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
├── v1.2.1-stable/                # 🟢 稳定版本 - UI布局优化版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
├── v1.2.0-stable/                # 🟢 稳定版本 - 过A制规则完善版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
├── v1.1.0-stable/                # 🟢 稳定版本 - 按钮反馈功能优化版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
├── v1.0.0-stable/                # 🟢 稳定版本 - 基础核心功能版
│   ├── ... (完整项目文件结构同上)
│   └── version-info.json          # 版本信息文件
└── version-manager.js             # 版本管理脚本
```

═══════════════════════════════════════════════════════════════════════════════

## 🛠️ 版本管理脚本

### 版本信息文件 (version-info.json)
```json
{
  "version": "v2.0.3-stable",
  "createdAt": "2024-12-19T15:30:00Z",
  "author": "Jennifer",
  "description": "游戏功能修复和UI优化版",
  "features": [
    "游戏核心功能全面修复",
    "UI界面全面优化",
    "历史记录功能完善",
    "设置功能修复",
    "版本管理系统完善",
    "开发者工具错误修复",
    "代码质量提升",
    "用户体验显著提升"
  ],
  "dependencies": {
    "微信小程序": ">= 8.0.0"
  },
  "changelog": [
    "修复开始按钮功能：未点击开始前禁止计分",
    "修复结束按钮后开始按钮仍被禁用的问题",
    "完善把数制A阶段逻辑：A→A2→A3三次机会机制",
    "开始按钮背景色改为蓝色，撤销按钮改为深紫色",
    "历史记录筛选弹窗全面优化",
    "详情弹窗高度调整、表头更新、滚动功能确认",
    "主页规则区域优化：比赛模式、文字大小调整",
    "修复设置按钮跳转到队伍设置页面的功能",
    "解决ProjectAll目录相关的ENOENT错误",
    "项目结构重组：将project-plan目录置于首位"
  ],
  "status": "stable",
  "rollbackSupported": true
}
```

═══════════════════════════════════════════════════════════════════════════════

## 🚀 快速操作指南

### 1. 创建当前版本的备份
```bash
# 自动创建当前版本的完整备份
npm run backup:create
```

### 2. 回滚到稳定版本
```bash
# 快速回滚到最新稳定版
npm run rollback:stable
```

### 3. 切换到开发版本
```bash
# 切换到开发版本进行测试
npm run switch:dev
```

### 4. 版本状态检查
```bash
# 检查版本完整性和依赖
npm run version:check
```

═══════════════════════════════════════════════════════════════════════════════

## ⚠️ 安全注意事项

### 回滚前检查
- [ ] 确认目标版本存在且完整
- [ ] 检查当前版本是否有未保存的修改
- [ ] 备份当前版本状态
- [ ] 通知相关人员版本变更

### 版本切换注意事项
- [ ] 检查依赖兼容性
- [ ] 验证配置文件正确性
- [ ] 测试核心功能可用性
- [ ] 更新环境配置

═══════════════════════════════════════════════════════════════════════════════

## 📈 版本监控

### 版本健康度检查
```bash
# 检查版本完整性
npm run health:check

# 性能对比测试
npm run performance:compare

# 功能回归测试
npm run regression:test
```

### 版本使用统计
- 当前活跃版本：v2.0.3-stable 🟢
- 版本总数：7个稳定版本
- 版本演进：v1.0.0 → v1.1.0 → v1.2.0 → v1.2.1 → v2.0.1 → v2.0.2 → v2.0.3
- 版本切换次数：记录所有版本操作
- 回滚频率：监控版本稳定性
- 用户反馈：收集版本使用体验
- 最新更新：2024年12月19日 - 游戏功能修复和UI优化

═══════════════════════════════════════════════════════════════════════════════

## 🔧 维护操作

### 定期维护任务
- [ ] 每周检查版本完整性
- [ ] 每月清理过期版本
- [ ] 定期备份重要版本
- [ ] 更新版本文档

### 紧急处理流程
1. **问题识别**: 快速定位版本问题
2. **版本回滚**: 回滚到稳定版本
3. **问题修复**: 在开发版本中修复
4. **测试验证**: 全面测试修复结果
5. **版本发布**: 发布修复版本

═══════════════════════════════════════════════════════════════════════════════

📝 **文档信息**

**创建时间**: 2024年9月21日  
**最后更新**: 2024年12月19日  
**负责人**: Jennifer  
**状态**: 活跃使用中  
**版本**: v2.0.3
