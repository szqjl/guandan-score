
<view class="container cn-paper-bg">

  <!-- å“ç‰Œæ ‡è¯†å’Œç¯å¢ƒæ ‡è¯† -->
  <view class="brand-section" style="width: 711rpx; display: flex; box-sizing: border-box; left: 20rpx; top: 3rpx; position: fixed; height: 25rpx">
    <view class="brand-logo" style="height: 46rpx; display: flex; box-sizing: border-box">
      <image class="main-logo" src="/images/GD.png" mode="aspectFit" style="width: 65rpx; display: block; box-sizing: border-box; height: 3rpx; position: relative; left: 0rpx; top: -7rpx"></image>
      <text class="brand-text">æ¼è›‹è®¡åˆ†</text>
    </view>
    <view class="env-badge">
      <text wx:if="{{isTrial}}" class="env-text trial">ä½“éªŒç‰ˆ</text>
      <text wx:elif="{{isDevelop}}" class="env-text develop">å¼€å‘ç‰ˆ</text>
    </view>
  </view>

  <!-- å·¦ä¾§å¯¼èˆªæŒ‰é’®ç»„ -->
  <view class="left-nav-panel">
    <button class="nav-btn" bindtap="onShowHistory" style="width: 55rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <text class="nav-icon-text">ğŸ“Š</text>
      <text class="nav-text">å†å²è®°å½•</text>
    </button>
    <button class="nav-btn" bindtap="onShowHelp" style="width: 43rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <text class="nav-icon-text">â“</text>
      <text class="nav-text">è¯´æ˜æ–‡æ¡£</text>
    </button>
    <button class="nav-btn" bindtap="onShowFeedback">
      <text class="nav-icon-text">ğŸ’¬</text>
      <text class="nav-text">åé¦ˆ</text>
    </button>
    <button class="nav-btn" bindtap="onShowSettings">
      <text class="nav-icon-text">âš™ï¸</text>
      <text class="nav-text">è®¾ç½®</text>
    </button>
    <button class="nav-btn" bindtap="onShowJoinRoom">
      <text class="nav-icon-text">ğŸšª</text>
      <text class="nav-text">åŠ å…¥æˆ¿é—´</text>
    </button>
  </view>

  <!-- æŠŠæ•°æ˜¾ç¤º - ç§»åˆ°ä½“éªŒç‰ˆä¸‹æ–¹ -->
  <view class="left-rounds-display">
    <view class="rounds-clock">
      <view class="rounds-number">
        <text wx:if="{{rounds > 0}}" class="rounds-text-large">{{rounds}}</text>
        <text wx:else class="rounds-text-small">VS</text>
      </view>
    </view>
  </view>

  <!-- å¤šäººæ¨¡å¼çŠ¶æ€æ˜¾ç¤º -->
  <view class="multi-mode-status" wx:if="{{isMultiMode}}">
    <text class="mode-text">å¤šäººæ¨¡å¼ {{roomId}}</text>
    <button class="exit-multi-btn" bindtap="onExitMultiMode" size="mini">é€€å‡º</button>
  </view>

  <!-- ä¸œè¥¿æ–¹é˜Ÿ & å—åŒ—æ–¹é˜Ÿ å¹¶æ’ -->
  <view class="main-layout">
    <!-- ä¸œè¥¿æ–¹é˜Ÿ -->
    <view class="team red-team">
      <view class="team-layout">
        <!-- ä¸œè¥¿æ–¹é˜Ÿç‹¬ç«‹å‡çº§æŒ‰é’®ç»„ - æ”¾åœ¨å·¦ä¾§ -->
        <view class="team-buttons left-buttons">
          <view class="team-btn team-btn-double {{buttonDisabledStates.red.double ? 'btn-disabled' : ''}}" data-team="red" data-value="3" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}" style="width: 51rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">3</text>
          </view>
          <view class="team-btn team-btn-two {{buttonDisabledStates.red.two ? 'btn-disabled' : ''}}" data-team="red" data-value="2" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">2</text>
          </view>
          <view class="team-btn team-btn-one {{buttonDisabledStates.red.one ? 'btn-disabled' : ''}}" data-team="red" data-value="1" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">1</text>
          </view>
        </view>
        <view class="score-container">
          <text class="team-label">ä¸œè¥¿æ–¹</text>
          <view class="level-display">
            <view class="level-display-content" style="height: 111rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
              <text class="level-text">{{levelTexts.red}}</text>
            </view>
            <image wx:if="{{showRedIcon}}" src="../../images/victor.svg" class="score-icon" />
          </view>
        </view>
      </view>
    </view>

    <!-- å—åŒ—æ–¹é˜Ÿ -->
    <view class="team blue-team">
      <view class="team-layout">
        <view class="score-container">
          <text class="team-label">å—åŒ—æ–¹</text>
          <view class="level-display">
            <view class="level-display-content">
              <text class="level-text" style="position: relative; left: 1rpx; top: 0rpx">{{levelTexts.blue}}</text>
            </view>
            <image wx:if="{{showBlueIcon}}" src="../../images/victor.svg" class="score-icon" />
          </view>
        </view>
        <!-- å—åŒ—æ–¹é˜Ÿç‹¬ç«‹å‡çº§æŒ‰é’®ç»„ - æ”¾åœ¨å³ä¾§ -->
        <view class="team-buttons right-buttons">
          <view class="team-btn team-btn-double {{buttonDisabledStates.blue.double ? 'btn-disabled' : ''}}" data-team="blue" data-value="3" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">3</text>
          </view>
          <view class="team-btn team-btn-two {{buttonDisabledStates.blue.two ? 'btn-disabled' : ''}}" data-team="blue" data-value="2" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">2</text>
          </view>
          <view class="team-btn team-btn-one {{buttonDisabledStates.blue.one ? 'btn-disabled' : ''}}" data-team="blue" data-value="1" bindtap="onLevelUpgrade" disabled="{{!gameStarted || gameEnded}}" style="position: ; left: 0rpx; top: -1rpx">
            <image src="../../images/arrow_up.svg" class="btn-icon"></image>
            <text class="btn-number">1</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ§åˆ¶æŒ‰é’®åŒºåŸŸ - ä½äºå®æ—¶æ¯”åˆ†ä¸‹æ–¹ -->
  <view class="control-buttons-section">
    <!-- æœ¬å±€æ¯”åˆ†è¡¨æŒ‰é’® -->
    <button class="score-table-btn" bindtap="onToggleScoreTable">
      <text class="score-table-text">æœ¬å±€æ¯”åˆ†è¡¨</text>
    </button>

    <!-- æ’¤é”€å’Œæ¢å¤æŒ‰é’® -->
    <button class="undo-btn" bindtap="undoLastStep" disabled="{{!canUndo}}">
      <image src="../../images/CexiaoGrey.svg" class="undo-icon"></image>
      <text class="undo-text">æ’¤é”€ä¸Šä¸€æŠŠ</text>
    </button>
    <button class="restore-btn" bindtap="restoreLastGame" disabled="{{!canRestore}}">
      <text class="restore-text">æ¢å¤æ¸¸æˆ</text>
    </button>
  </view>

  <!-- æ¯”åˆ†å†å²è¡¨æ ¼ - å¯åˆ‡æ¢æ˜¾ç¤º -->
  <view class="history-table-section" style="width: 406rpx; height: 88rpx; display: {{showScoreTable ? 'flex' : 'none'}}; box-sizing: border-box; left: 9rpx; top: 0rpx; position: relative">
    <view class="history-header">
      <text class="history-title">æœ¬å±€æ¯æŠŠæ¯”åˆ†</text>
    </view>

    <!-- å›ºå®šé˜Ÿä¼åˆ— -->
    <view class="fixed-team-column">
      <view class="fixed-team-cell header-cell">æŠŠæ•°</view>
      <view class="fixed-team-cell">ä¸œè¥¿æ–¹</view>
      <view class="fixed-team-cell">å—åŒ—æ–¹</view>
    </view>

    <!-- å¯æ»šåŠ¨çš„è¡¨æ ¼å†…å®¹ -->
    <view class="scrollable-table-container">
      <!-- è¡¨æ ¼å¤´éƒ¨ -->
      <view class="table-row header-row">
        <view class="table-cell">ä¸€</view>
        <view class="table-cell">äºŒ</view>
        <view class="table-cell">ä¸‰</view>
        <view class="table-cell">å››</view>
        <view class="table-cell">äº”</view>
        <view class="table-cell">å…­</view>
        <view class="table-cell">ä¸ƒ</view>
        <view class="table-cell">å…«</view>
        <view class="table-cell">ä¹</view>
        <view class="table-cell">å</view>
        <view class="table-cell">åä¸€</view>
        <view class="table-cell">åäºŒ</view>
        <view class="table-cell">åä¸‰</view>
        <view class="table-cell">åå››</view>
        <view class="table-cell">åäº”</view>
        <view class="table-cell">åå…­</view>
        <view class="table-cell">åä¸ƒ</view>
        <view class="table-cell">åå…«</view>
      </view>

      <!-- çº¢æ–¹è¡Œ -->
      <view class="table-row">
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="0">{{historyScores[0] && historyScores[0].red ? historyScores[0].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="1">{{historyScores[1] && historyScores[1].red ? historyScores[1].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="2">{{historyScores[2] && historyScores[2].red ? historyScores[2].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="3">{{historyScores[3] && historyScores[3].red ? historyScores[3].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="4">{{historyScores[4] && historyScores[4].red ? historyScores[4].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="5">{{historyScores[5] && historyScores[5].red ? historyScores[5].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="6">{{historyScores[6] && historyScores[6].red ? historyScores[6].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="7">{{historyScores[7] && historyScores[7].red ? historyScores[7].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="8">{{historyScores[8] && historyScores[8].red ? historyScores[8].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="9">{{historyScores[9] && historyScores[9].red ? historyScores[9].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="10">{{historyScores[10] && historyScores[10].red ? historyScores[10].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="11">{{historyScores[11] && historyScores[11].red ? historyScores[11].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="12">{{historyScores[12] && historyScores[12].red ? historyScores[12].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="13">{{historyScores[13] && historyScores[13].red ? historyScores[13].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="14">{{historyScores[14] && historyScores[14].red ? historyScores[14].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="15">{{historyScores[15] && historyScores[15].red ? historyScores[15].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="16">{{historyScores[16] && historyScores[16].red ? historyScores[16].red : '-'}}</view>
        <view class="table-cell red-score" bindlongpress="onLongPressHistory" data-index="17">{{historyScores[17] && historyScores[17].red ? historyScores[17].red : '-'}}</view>
      </view>

      <!-- è“æ–¹è¡Œ -->
      <view class="table-row">
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="0">{{historyScores[0] && historyScores[0].blue ? historyScores[0].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="1">{{historyScores[1] && historyScores[1].blue ? historyScores[1].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="2">{{historyScores[2] && historyScores[2].blue ? historyScores[2].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="3">{{historyScores[3] && historyScores[3].blue ? historyScores[3].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="4">{{historyScores[4] && historyScores[4].blue ? historyScores[4].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="5">{{historyScores[5] && historyScores[5].blue ? historyScores[5].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="6">{{historyScores[6] && historyScores[6].blue ? historyScores[6].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="7">{{historyScores[7] && historyScores[7].blue ? historyScores[7].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="8">{{historyScores[8] && historyScores[8].blue ? historyScores[8].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="9">{{historyScores[9] && historyScores[9].blue ? historyScores[9].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="10">{{historyScores[10] && historyScores[10].blue ? historyScores[10].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="11">{{historyScores[11] && historyScores[11].blue ? historyScores[11].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="12">{{historyScores[12] && historyScores[12].blue ? historyScores[12].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="13">{{historyScores[13] && historyScores[13].blue ? historyScores[13].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="14">{{historyScores[14] && historyScores[14].blue ? historyScores[14].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="15">{{historyScores[15] && historyScores[15].blue ? historyScores[15].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="16">{{historyScores[16] && historyScores[16].blue ? historyScores[16].blue : '-'}}</view>
        <view class="table-cell blue-score" bindlongpress="onLongPressHistory" data-index="17">{{historyScores[17] && historyScores[17].blue ? historyScores[17].blue : '-'}}</view>
      </view>
    </view>
  </view>

  <!-- å³ä¾§æ§åˆ¶é¢æ¿ -->
  <view class="right-control-panel">
    <!-- åˆ›å»ºæ¯”èµ›æŒ‰é’® -->
    <button class="create-btn" bindtap="onCreateMatch" style="left: 0rpx; top: -5rpx; position: relative">
      åˆ›å»ºæ¯”èµ›
    </button>
    
    <!-- å¼€å§‹æ¸¸æˆæŒ‰é’® -->
    <button class="start-btn" bindtap="onStartGame" disabled="{{gameStarted && !gameEnded}}" style="left: 0rpx; top: -5rpx; position: relative">
      {{gameStarted && !gameEnded ? 'æ¸¸æˆè¿›è¡Œä¸­' : 'å¼€å§‹æ¸¸æˆ'}}
    </button>

    <!-- è§„åˆ™é€‰æ‹© - æš‚æ—¶éšè— -->
    <!-- <view class="rule-section {{gameStarted ? 'disabled' : ''}}" disabled="{{gameStarted}}">
      <text>æ¯”èµ›æ¨¡å¼:</text>
      <radio-group bindchange="onRuleChange">
        <label>
          <radio value="by-A" checked="{{rule === 'by-A'}}" />è¿‡A
        </label>
        <label>
          <radio value="by-rounds" checked="{{rule === 'by-rounds'}}" />æŠŠæ•°
          <view wx:if="{{rule === 'by-rounds'}}" class="rounds-selector">
            <text class="rounds-display-text" bindtap="onShowRoundsPicker">{{maxRounds}}</text>
          </view>
        </label>
      </radio-group>
    </view> -->


    <!-- ç»“æŸæœ¬å±€æŒ‰é’® -->
    <button class="end-btn" bindtap="onEndGame">ç»“æŸ</button>
  </view>

  <!-- æŠŠæ•°é€‰æ‹©å¼¹çª— -->
  <view class="rounds-picker-modal" wx:if="{{showRoundsPicker}}">
    <view class="rounds-picker-overlay" bindtap="onCloseRoundsPicker"></view>
    <view class="rounds-picker-content">
      <view class="rounds-picker-header">
        <text class="rounds-picker-title">é€‰æ‹©æœ€å¤§æŠŠæ•°</text>
      </view>
      <view class="rounds-picker-grid">
        <view class="rounds-picker-item {{tempMaxRounds === 7 ? 'selected' : ''}}" data-value="7" bindtap="onSelectRounds">7æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 8 ? 'selected' : ''}}" data-value="8" bindtap="onSelectRounds">8æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 9 ? 'selected' : ''}}" data-value="9" bindtap="onSelectRounds">9æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 10 ? 'selected' : ''}}" data-value="10" bindtap="onSelectRounds">10æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 11 ? 'selected' : ''}}" data-value="11" bindtap="onSelectRounds">11æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 12 ? 'selected' : ''}}" data-value="12" bindtap="onSelectRounds">12æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 13 ? 'selected' : ''}}" data-value="13" bindtap="onSelectRounds">13æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 14 ? 'selected' : ''}}" data-value="14" bindtap="onSelectRounds">14æŠŠ</view>
        <view class="rounds-picker-item {{tempMaxRounds === 15 ? 'selected' : ''}}" data-value="15" bindtap="onSelectRounds">15æŠŠ</view>
      </view>
      <view class="rounds-picker-footer">
        <button class="rounds-picker-confirm" bindtap="onConfirmRounds">ç¡®å®š</button>
        <button class="rounds-picker-cancel" bindtap="onCloseRoundsPicker">å–æ¶ˆ</button>
      </view>
    </view>
  </view>

  <!-- èƒœåˆ©åŠ¨ç”»å¼¹çª— -->
  <view class="victory-animation-modal" wx:if="{{showVictoryAnimation}}">
    <view class="victory-overlay"></view>
    <view class="victory-content">
      <view class="victory-icon">ğŸ†</view>
      <view class="victory-title">{{victoryTeam === 'red' ? 'çº¢æ–¹èƒœåˆ©!' : 'è“æ–¹èƒœåˆ©!'}}</view>
      <view class="victory-message">{{victoryMessage}}</view>
      <view class="victory-confetti">
        <view class="confetti-piece" wx:for="{{[1,2,3,4,5,6,7,8,9,10]}}" wx:key="*this"></view>
      </view>
    </view>
  </view>

  <!-- æ–‡æ¡£è¯´æ˜å¼¹çª— -->
  <view class="help-modal-overlay" wx:if="{{showHelpModal}}" bindtap="onCloseHelpModal">
    <view class="help-modal-content" catchtap="stopPropagation">
      <view class="help-modal-header">
        <view class="help-modal-title">
          <image class="help-icon" src="/images/GD.png" mode="aspectFit" binderror="onImageError" bindload="onImageLoad"></image>
          <text class="help-title">æ¼è›‹è®¡åˆ†ä½¿ç”¨æŒ‡å—</text>
        </view>
        <view class="header-buttons">
          <view class="back-to-top-btn" bindtap="scrollToTop">
            <text class="back-icon">â¬†</text>
          </view>
          <view class="help-close-btn" bindtap="onCloseHelpModal">
            <text>Ã—</text>
          </view>
        </view>
      </view>
      
      <scroll-view class="help-modal-body" scroll-y="{{true}}" scroll-top="{{scrollTop}}" id="helpScrollView">
        <!-- ç›®å½•å¯¼èˆª -->
        <view class="help-toc">
          <view class="toc-title">ğŸ“‹ ç›®å½•</view>
          <view class="toc-list">
            <view class="toc-item" bindtap="scrollToSection" data-section="version">ğŸ·ï¸ ç‰ˆæœ¬ä¿¡æ¯</view>
            <view class="toc-item" bindtap="scrollToSection" data-section="intro">ğŸ¯ æ¸¸æˆç®€ä»‹</view>
            <view class="toc-item" bindtap="scrollToSection" data-section="modes">ğŸ® æ¯”èµ›æ¨¡å¼</view>
            <view class="toc-item" bindtap="scrollToSection" data-section="rules">ğŸ“Š è®¡åˆ†è§„åˆ™</view>
            <view class="toc-item" bindtap="scrollToSection" data-section="features">ğŸ”§ åŠŸèƒ½ç‰¹è‰²</view>
            <view class="toc-item" bindtap="scrollToSection" data-section="tips">ğŸ’¡ ä½¿ç”¨æç¤º</view>
          </view>
        </view>

        <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
        <view class="help-section" id="version">
          <view class="help-section-title">
            <text class="section-icon">ğŸ·ï¸</text>
            <text class="section-title">ç‰ˆæœ¬ä¿¡æ¯</text>
          </view>
          <view class="help-section-content">
            <text class="version-info">æ¼è›‹è®¡åˆ†å°ç¨‹åº v2.0.6-stable</text>
            <text class="version-desc">ä¸“ä¸ºæ¼è›‹æ¸¸æˆè®¾è®¡çš„ä¸“ä¸šè®¡åˆ†å·¥å…·</text>
          </view>
        </view>

        <!-- æ¸¸æˆç®€ä»‹ -->
        <view class="help-section" id="intro">
          <view class="help-section-title">
            <text class="section-icon">ğŸ¯</text>
            <text class="section-title">æ¸¸æˆç®€ä»‹</text>
          </view>
          <view class="help-section-content">
            <text class="help-text">æ¼è›‹æ˜¯ä¸€æ¬¾æµè¡Œäºæ±Ÿè‹åœ°åŒºçš„æ‰‘å…‹ç‰Œæ¸¸æˆï¼Œæœ¬å°ç¨‹åºä¸ºæ¼è›‹æ¯”èµ›æä¾›ä¸“ä¸šçš„è®¡åˆ†æœåŠ¡ï¼Œæ”¯æŒå®æ—¶è®¡åˆ†ã€å†å²è®°å½•å’Œæ•°æ®åˆ†æã€‚</text>
          </view>
        </view>

        <!-- æ¯”èµ›æ¨¡å¼ -->
        <view class="help-section" id="modes">
          <view class="help-section-title">
            <text class="section-icon">ğŸ®</text>
            <text class="section-title">æ¯”èµ›æ¨¡å¼</text>
          </view>
          <view class="help-section-content">
            <view class="mode-item">
              <text class="mode-title">è¿‡Aåˆ¶</text>
              <text class="mode-desc">ä»2åˆ°Açš„å‡çº§è·¯å¾„ï¼ŒAå¿…æ‰“ï¼Œæœ‰3æ¬¡æœºä¼šï¼ˆAâ†’A1â†’A2â†’A3ï¼‰</text>
            </view>
            <view class="mode-item">
              <text class="mode-title">æŠŠæ•°åˆ¶</text>
              <text class="mode-desc">è®¾ç½®æœ€å¤§æŠŠæ•°ï¼Œæ”¯æŒ"è¿½ä¸ä¸Š"æœºåˆ¶ï¼Œåœ¨å›ºå®šæŠŠæ•°å†…è·å¾—æ›´é«˜åˆ†æ•°çš„é˜Ÿä¼è·èƒœ</text>
            </view>
          </view>
        </view>

        <!-- è®¡åˆ†è§„åˆ™ -->
        <view class="help-section" id="rules">
          <view class="help-section-title">
            <text class="section-icon">ğŸ“Š</text>
            <text class="section-title">è®¡åˆ†è§„åˆ™</text>
          </view>
          <view class="help-section-content">
            <view class="score-rule-item">
              <text class="score-btn">åŒä¸Š</text>
              <text class="score-value">+3åˆ†ï¼Œå‡3çº§</text>
            </view>
            <view class="score-rule-item">
              <text class="score-btn">1æ¸¸3æ¸¸</text>
              <text class="score-value">+2åˆ†ï¼Œå‡2çº§</text>
            </view>
            <view class="score-rule-item">
              <text class="score-btn">1æ¸¸æœ«æ¸¸</text>
              <text class="score-value">+1åˆ†ï¼Œå‡1çº§</text>
            </view>
          </view>
        </view>

        <!-- åŠŸèƒ½ç‰¹è‰² -->
        <view class="help-section" id="features">
          <view class="help-section-title">
            <text class="section-icon">ğŸ”§</text>
            <text class="section-title">åŠŸèƒ½ç‰¹è‰²</text>
          </view>
          <view class="help-section-content">
            <view class="feature-grid">
              <view class="feature-item">
                <text class="feature-icon">âš¡</text>
                <text class="feature-text">å®æ—¶æ¯”åˆ†è®°å½•</text>
              </view>
              <view class="feature-item">
                <text class="feature-icon">ğŸ“ˆ</text>
                <text class="feature-text">å†å²è®°å½•æŸ¥çœ‹</text>
              </view>
              <view class="feature-item">
                <text class="feature-icon">ğŸ”</text>
                <text class="feature-text">å¤šç§ç­›é€‰æ–¹å¼</text>
              </view>
              <view class="feature-item">
                <text class="feature-icon">ğŸ“Š</text>
                <text class="feature-text">è¯¦ç»†æ¯”åˆ†ç»Ÿè®¡</text>
              </view>
              <view class="feature-item">
                <text class="feature-icon">ğŸ“±</text>
                <text class="feature-text">æ”¯æŒæ¨ªå±æ˜¾ç¤º</text>
              </view>
              <view class="feature-item">
                <text class="feature-icon">ğŸ’¾</text>
                <text class="feature-text">è‡ªåŠ¨ä¿å­˜è¿›åº¦</text>
              </view>
            </view>
          </view>
        </view>

        <!-- ä½¿ç”¨æç¤º -->
        <view class="help-section" id="tips">
          <view class="help-section-title">
            <text class="section-icon">ğŸ’¡</text>
            <text class="section-title">ä½¿ç”¨æç¤º</text>
          </view>
          <view class="help-section-content">
            <view class="tip-list">
              <view class="tip-item">
                <text class="tip-bullet">â€¢</text>
                <text class="tip-text">æ¸¸æˆå¼€å§‹å‰å¯è‡ªç”±åˆ‡æ¢æ¯”èµ›æ¨¡å¼</text>
              </view>
              <view class="tip-item">
                <text class="tip-bullet">â€¢</text>
                <text class="tip-text">é•¿æŒ‰å†å²æ¯”åˆ†å¯ä¿®æ”¹æŒ‡å®šæŠŠæ•°</text>
              </view>
              <view class="tip-item">
                <text class="tip-bullet">â€¢</text>
                <text class="tip-text">æ”¯æŒæ’¤é”€ä¸Šä¸€æ­¥æ“ä½œ</text>
              </view>
              <view class="tip-item">
                <text class="tip-bullet">â€¢</text>
                <text class="tip-text">è‡ªåŠ¨ä¿å­˜æ¸¸æˆè¿›åº¦ï¼Œæ”¯æŒæ¢å¤</text>
              </view>
              <view class="tip-item">
                <text class="tip-bullet">â€¢</text>
                <text class="tip-text">ç‚¹å‡»å·¦ä¾§å¯¼èˆªæŒ‰é’®å¿«é€Ÿè®¿é—®åŠŸèƒ½</text>
              </view>
            </view>
          </view>
        </view>

        <!-- å¼€å‘å›¢é˜Ÿ -->
        <view class="help-section help-footer">
          <view class="help-section-content">
            <view class="footer-content">
              <image class="gd-logo" src="/images/GD.png" mode="aspectFit"></image>
              <view class="footer-text">
                <text class="team-info">æ¼è›‹è®¡åˆ†å¼€å‘å›¢é˜Ÿå¹¶ç”±AIååŠ©</text>
                <text class="copyright">Â© 2025 æ¼è›‹è®¡åˆ†å°ç¨‹åº</text>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
      
      <view class="help-modal-footer">
        <button class="help-confirm-btn" bindtap="onCloseHelpModal">çŸ¥é“äº†</button>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®å¼¹çª— -->
  <view class="settings-modal" wx:if="{{showSettings}}">
    <view class="settings-overlay" bindtap="onCloseSettings"></view>
    <view class="settings-content">
      <!-- å¼¹çª—æ ‡é¢˜ -->
      <view class="settings-header">
        <text class="settings-title">è®¾ç½®</text>
        <view class="close-btn" bindtap="onCloseSettings">
          <text class="close-icon">Ã—</text>
        </view>
      </view>

      <!-- è®¾ç½®é€‰é¡¹ -->
      <view class="settings-options">
        <!-- æ¸¸æˆè®¾ç½® -->
        <view class="settings-section">
          <text class="section-title">æ¸¸æˆè®¾ç½®</text>

          <view class="option-item">
            <text class="option-label">é»˜è®¤è®¡åˆ†è§„åˆ™</text>
            <view class="option-value">
              <picker bindchange="onRuleChange" value="{{ruleIndex}}" range="{{ruleOptions}}">
                <view class="picker-text">{{ruleOptions[ruleIndex]}}</view>
              </picker>
            </view>
          </view>

          <view class="option-item">
            <text class="option-label">æœ€å¤§æŠŠæ•°</text>
            <view class="option-value">
              <picker bindchange="onMaxRoundsChange" value="{{maxRoundsIndex}}" range="{{maxRoundsOptions}}">
                <view class="picker-text">{{maxRoundsOptions[maxRoundsIndex]}}</view>
              </picker>
            </view>
          </view>
        </view>

        <!-- æ˜¾ç¤ºè®¾ç½® -->
        <view class="settings-section">
          <text class="section-title">æ˜¾ç¤ºè®¾ç½®</text>

          <view class="option-item">
            <text class="option-label">æ˜¾ç¤ºç¯å¢ƒæ ‡è¯†</text>
            <switch checked="{{showEnvBadge}}" bindchange="onEnvBadgeChange" color="#EE1967" />
          </view>

          <view class="option-item">
            <text class="option-label">æ˜¾ç¤ºç‚¹å‡»æç¤º</text>
            <switch checked="{{showClickToast}}" bindchange="onClickToastChange" color="#EE1967" />
          </view>
        </view>

        <!-- æ•°æ®è®¾ç½® -->
        <view class="settings-section">
          <text class="section-title">æ•°æ®è®¾ç½®</text>

          <view class="option-item">
            <text class="option-label">è‡ªåŠ¨ä¿å­˜</text>
            <switch checked="{{autoSave}}" bindchange="onAutoSaveChange" color="#EE1967" />
          </view>

          <view class="option-item">
            <text class="option-label">æ¸…ç©ºå†å²è®°å½•</text>
            <view class="option-value">
              <button class="clear-btn" bindtap="onClearHistory">æ¸…ç©º</button>
            </view>
          </view>
        </view>
      </view>

      <!-- å¼¹çª—åº•éƒ¨æŒ‰é’® -->
      <view class="settings-footer">
        <button class="settings-btn cancel-btn" bindtap="onCloseSettings">å–æ¶ˆ</button>
        <button class="settings-btn confirm-btn" bindtap="onSaveSettings">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>