<!--pages/room/index.wxml-->
<view class="room-page">
  <!-- å·¦ä¾§ä¿¡æ¯å— -->
  <view class="left-info-block">
    <!-- æˆ¿é—´ä¿¡æ¯åŒºåŸŸ -->
    <view class="room-info-section">
      <view class="room-info">
        <text class="room-title">ğŸ  {{roomId}}</text>
        <view class="user-info" bindtap="onUserInfoClick">
          <button class="avatar-btn" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
            <image wx:if="{{userAvatar}}" src="{{userAvatar}}" class="user-avatar" />
            <text wx:else class="default-user-avatar">ğŸ‘¤</text>
          </button>
          <input class="nickname-input" value="{{userNickname}}" bindchange="onNicknameChange" placeholder="ç‚¹å‡»è®¾ç½®æ˜µç§°" />
        </view>
      </view>
      <view class="game-mode-selector">
        <picker bindchange="onGameModeChange" value="{{gameModeIndex}}" range="{{gameModeOptions}}" range-key="text">
          <view class="mode-picker">
            <text class="mode-icon">ğŸ“‹</text>
            <text class="mode-text">{{gameModeText}}</text>
            <text class="mode-arrow">â–¼</text>
          </view>
        </picker>
      </view>
    </view>
  </view>
  
  <!-- ä¸­é—´ç‰Œæ¡Œå— -->
  <view class="center-table-block">
    <!-- åº§ä½å¸ƒå±€ï¼šä¸œå—è¥¿åŒ— + ä¸­å¤®ç‰Œæ¡Œ -->
    <view class="seats-layout">
      <!-- åŒ—åº§ -->
      <view class="seat-container north-container">
        <view class="player-seat north-seat {{seats.north.isClickable ? 'clickable' : 'disabled'}}" 
              bindtap="onSeatClick" data-seat="north">
          <view class="seat-avatar">
            <image wx:if="{{seats.north.avatar}}" src="{{seats.north.avatar}}" />
            <text wx:else class="default-avatar">{{seats.north.playerName ? seats.north.playerName.charAt(0) : 'åŒ—'}}</text>
          </view>
        </view>
        <view class="seat-label north-label">
          <text class="player-name">{{seats.north.playerName || seats.north.seatName}}</text>
          <text wx:if="{{seats.north.isHost}}" class="host-badge">æˆ¿ä¸»</text>
        </view>
      </view>
      
      <!-- è¥¿åº§ -->
      <view class="seat-container west-container">
        <view class="player-seat west-seat {{seats.west.isClickable ? 'clickable' : 'disabled'}}" 
              bindtap="onSeatClick" data-seat="west">
          <view class="seat-avatar">
            <image wx:if="{{seats.west.avatar}}" src="{{seats.west.avatar}}" />
            <text wx:else class="default-avatar">{{seats.west.playerName ? seats.west.playerName.charAt(0) : 'è¥¿'}}</text>
          </view>
        </view>
        <view class="seat-label west-label">
          <text class="player-name">{{seats.west.playerName || seats.west.seatName}}</text>
          <text wx:if="{{seats.west.isHost}}" class="host-badge">æˆ¿ä¸»</text>
        </view>
      </view>
      
      <!-- ä¸­å¤®ç‰Œæ¡Œ -->
      <view class="poker-table">
        <image class="qr-image" src="{{qrCodeUrl}}" />
        <text class="qr-tip">æ‰«ç åŠ å…¥</text>
      </view>
      
      <!-- ä¸œåº§ -->
      <view class="seat-container east-container">
        <view class="player-seat east-seat {{seats.east.isClickable ? 'clickable' : 'disabled'}}" 
              bindtap="onSeatClick" data-seat="east">
          <view class="seat-avatar">
            <image wx:if="{{seats.east.avatar}}" src="{{seats.east.avatar}}" />
            <text wx:else class="default-avatar">{{seats.east.playerName ? seats.east.playerName.charAt(0) : 'ä¸œ'}}</text>
          </view>
        </view>
        <view class="seat-label east-label">
          <text class="player-name">{{seats.east.playerName || seats.east.seatName}}</text>
          <text wx:if="{{seats.east.isHost}}" class="host-badge">æˆ¿ä¸»</text>
        </view>
      </view>
      
      <!-- å—åº§ -->
      <view class="seat-container south-container">
        <view class="player-seat south-seat {{seats.south.isClickable ? 'clickable' : 'disabled'}}" 
              bindtap="onSeatClick" data-seat="south">
          <view class="seat-avatar">
            <image wx:if="{{seats.south.avatar}}" src="{{seats.south.avatar}}" />
            <text wx:else class="default-avatar">{{seats.south.playerName ? seats.south.playerName.charAt(0) : 'å—'}}</text>
          </view>
        </view>
        <view class="seat-label south-label">
          <text class="player-name">{{seats.south.playerName || seats.south.seatName}}</text>
          <text wx:if="{{seats.south.isHost}}" class="host-badge">æˆ¿ä¸»</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å³ä¾§æŒ‰é’®å— -->
  <view class="right-buttons-block">
    <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
    <view class="action-buttons">
      <button class="create-btn" bindtap="onStartGame" disabled="{{!canStartGame}}">åˆ›å»º</button>
      <button class="share-btn" bindtap="onShareRoom">åˆ†äº«æˆ¿é—´</button>
      <button class="close-btn" bindtap="onLeaveRoom">ç¦»å¼€</button>
    </view>
  </view>
</view>