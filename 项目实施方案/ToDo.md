# guandan-score 项目待办事项

📅 创建时间: 2024年12月19日  
📝 负责人: Jennifer  
🔄 状态: 待处理  

═══════════════════════════════════════════════════════════════════════════════

## 🚀 紧急任务

### 📤 Git推送任务
- [ ] **推送主项目到远程仓库**
  - 仓库: `git@github.com:szqjl/guandan-score.git`
  - 分支: `feature/adjust-scoring-buttons`
  - 状态: 待推送
  - 内容: v1.1.0版本更新、时间线优化

- [ ] **推送项目实施方案到新仓库**
  - 仓库: `git@github.com:szqjl/ProjectAll.git`
  - 分支: `main`
  - 状态: 待推送
  - 内容: 完整的项目实施方案文档

### ⚠️ 推送注意事项
- 确保网络连接稳定
- 检查SSH密钥配置
- 验证仓库地址正确性
- 推送前先测试连接

═══════════════════════════════════════════════════════════════════════════════

## 🔧 代码清理任务

### ❌ 发现的问题

1. **未定义的函数引用**
   - `onImageError` - 在WXML中引用但JS中未定义
   - 位置：`pages/index/index.wxml` 第6行和第11行
   - 影响：会在控制台产生警告

2. **未定义的变量引用**
   - `leftBorderImage` - 在WXML中引用但JS中未定义
   - `rightBorderImage` - 在WXML中引用但JS中未定义
   - 位置：`pages/index/index.wxml` 第3行和第8行
   - 影响：边框图片无法正常显示

3. **备份文件清理**
   - `pages/index/index.wxss.backup` - 不需要的备份文件
   - 影响：增加项目体积

4. **可能未使用的图片资源**
   - `CexiaoGrey.svg` - 需要确认是否被使用
   - `biaoge.png` - 需要确认是否被使用
   - 影响：增加项目体积

### ✅ 修复方案

1. **修复onImageError函数**
   ```javascript
   // 在pages/index/index.js中添加
   onImageError(e) {
     console.log('图片加载失败:', e.detail.errMsg);
   }
   ```

2. **修复边框图片变量**
   ```javascript
   // 在pages/index/index.js的data中添加
   leftBorderImage: '../../images/左边框.svg',
   rightBorderImage: '../../images/右边框.svg'
   ```

3. **删除备份文件**
   - 删除 `pages/index/index.wxss.backup`

4. **检查图片资源使用情况**
   - 搜索 `CexiaoGrey.svg` 的使用情况
   - 搜索 `biaoge.png` 的使用情况
   - 删除未使用的图片资源

### 🎯 过A制规则与代码实现不匹配问题

经过仔细对比过A制规则文档和代码实现，发现以下不匹配的地方：

1. **过A制A阶段升级逻辑问题**
   - **规则要求**: A必打，升级顺序为 A→A1→A2→A3→E
   - **代码问题**: 在过A制下，代码第283行直接显示为'A'，没有实现A1/A2/A3的升级逻辑
   - **位置**: `pages/index/index.js` 第282-285行
   - **修复建议**: 过A制下也需要实现A1/A2/A3的升级逻辑，而不是直接显示为'A'

2. **过A制按钮升级规则不完整**
   - **规则要求**: A1/A2/A3的升级条件都需要支持"被对方点了升级按钮"
   - **代码问题**: 过A制下的升级逻辑被简化，没有完整实现A1/A2/A3的升级条件判断
   - **位置**: `pages/index/index.js` 第351-473行
   - **修复建议**: 完善过A制下的升级条件判断逻辑

3. **结束规则判断逻辑差异**
   - **规则要求**: "双方握手言和"的触发条件是"双方比分相同"
   - **代码实现**: 代码中判断的是"双方先后到了A3"
   - **位置**: `pages/index/index.js` 第475行
   - **修复建议**: 需要明确规则文档中的"双方比分相同"具体指什么情况

4. **过A制下E状态的处理**
   - **规则要求**: A2升A3失败后到达E状态
   - **代码问题**: E状态的处理逻辑存在，但可能与规则不完全匹配
   - **位置**: `pages/index/index.js` 第727-728行
   - **修复建议**: 确认E状态的触发条件是否符合规则要求

### 📋 任务优先级

- 🔴 **紧急**: Git推送任务（代码同步）
- 🔴 **高优先级**: 修复过A制规则实现问题（影响核心游戏逻辑）
- 🔴 **高优先级**: 修复未定义变量和函数（影响功能）
- 🟡 **中优先级**: 删除备份文件（减少体积）
- 🟢 **低优先级**: 清理未使用图片（优化资源）

### 📝 注意事项

- 修复前请先备份当前代码
- 测试修复后的功能是否正常
- 确保所有图片资源都能正常加载
- 修复完成后更新版本号

═══════════════════════════════════════════════════════════════════════════════

## 🚀 功能优化建议

### 用户体验优化
- [ ] 添加加载动画
- [ ] 优化按钮点击反馈
- [ ] 添加音效支持
- [ ] 优化页面切换动画

### 性能优化
- [ ] 图片懒加载优化
- [ ] 代码分包加载
- [ ] 缓存策略优化
- [ ] 内存使用优化

### 功能扩展
- [ ] 添加游戏统计功能
- [ ] 支持多语言
- [ ] 添加主题切换
- [ ] 导出游戏记录

═══════════════════════════════════════════════════════════════════════════════

## 📚 文档维护

### 需要更新的文档
- [ ] 更新API文档
- [ ] 完善用户手册
- [ ] 添加开发者指南
- [ ] 更新版本说明

### 代码注释
- [ ] 添加函数注释
- [ ] 完善变量说明
- [ ] 更新README文件
- [ ] 添加代码示例

═══════════════════════════════════════════════════════════════════════════════

📝 **最后更新**: 2024年12月19日  
🔄 **状态**: 待处理  
👤 **负责人**: Jennifer  
